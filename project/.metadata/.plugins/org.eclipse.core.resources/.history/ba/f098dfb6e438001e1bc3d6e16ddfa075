<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-compatible" content="IE=Edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>아이디 찾기</title>
    <style>
        .box { width: 150px; height: 50px; border:1px solid #ccc; }
    </style>
</head>
<body>
<!-- form 태그 없는것 ajax로 통신 , button -->	
<!-- 응용문제 3번-->

[아이디 찾기]
이름 : <input type="text" id="usernm">
이메일 : <input type="text" id="useremail">

<input type="button" value="아이디 찾기" onclick="id_search()" >
<br><br>
아이디명 : <div class="box" id="box"></div>
<script>
	function id_search(){
		var nm = document.getElementById("usernm");
		var em = document.getElementById("useremail");
		
		if(nm.value==""){
			alert("이름이 없습니다");
		}
		else if(em.value==""){
			alert("이메일이 없습니다..");
		}
		else{
			ajax(nm.value,em.value);
		}
		
	}
	function ajax(){
		var info;
		var data;
		
		function wk(){
			if(window.XMLHttpRequest){
				return new XMLHttpRequest;
			}
		}
		function idsearch(){
			if(info.readyState==XMLHttpRequest.DONE && info.status==200){
				//console.log(this.response);
				var result = this.response;
				if(result=="error"){
					alert("해당 정보를 찾을 수 없습니다.");
				}
				else {
					var html = document.getElementById("box");
					html.innerHTML = "<p>" + result + "</p>"
					html.append(result);
				}
		}
	}
	info = wk();
	info.onreadystatechange = idsearch;
	info open("POST","./idloss.do",true);
	
	
</script>

</body>
</html>